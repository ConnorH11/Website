<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <title>FreePBX Setup</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
/* CSS Variables & Reset */
:root {
    --bg-color: #0a192f;
    --bg-color-light: #112240;
    --text-primary: #ecf0f1;
    --text-secondary: #8892b0;
    --accent: #64ffda;
    --accent-glow: rgba(100, 255, 218, 0.1);

    --font-heading: 'Playfair Display', serif;
    --font-body: 'Inter', sans-serif;

    --nav-height: 80px;
    --transition: all 0.3s ease-in-out;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    scroll-behavior: smooth;
}

body {
    background-color: var(--bg-color);
    color: var(--text-primary);
    font-family: var(--font-body);
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

a {
    text-decoration: none;
    color: inherit;
    transition: var(--transition);
}

ul {
    list-style: none;
}

/* Utilities */
.content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    width: 100%;
}

.section {
    padding: 60px 0;
    min-height: auto;
    display: flex;
    align-items: center;
}

/* Typography */
h1,
h2,
h3 {
    font-family: var(--font-heading);
    color: var(--text-primary);
    font-weight: 700;
}

/* Code Blocks */
pre {
    background: var(--bg-color-light);
    padding: 1.5rem;
    border-radius: 8px;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid transparent;
    /* Align with cards */
    transition: var(--transition);
}

pre:hover {
    border-color: rgba(100, 255, 218, 0.1);
    box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7);
}

code {
    font-family: 'Fira Code', 'Courier New', Courier, monospace;
    /* robust monospace stack */
    font-size: 0.95rem;
    color: var(--accent);
    /* Default code color */
}

/* Inline code specific */
p code,
li code {
    background: rgba(100, 255, 218, 0.07);
    /* Very subtle accent background */
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-size: 0.9em;
}

/* Pre block code override */
pre code {
    background: transparent;
    padding: 0;
    color: #e6f1ff;
    /* Light text for dark block */
    border-radius: 0;
}

.section-title {
    font-size: 2.5rem;
    margin-bottom: 3rem;
    position: relative;
    display: inline-block;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 0;
    width: 60px;
    height: 4px;
    background: var(--accent);
}

/* Animations */
.hidden-section {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.show-section {
    opacity: 1;
    transform: translateY(0);
}

/* Navigation - Enhanced Glassmorphism */
.navbar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--nav-height);
    background: rgba(10, 25, 47, 0.9);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    z-index: 1000;
    display: flex;
    align-items: center;
    box-shadow: 0 10px 30px -10px rgba(2, 12, 27, 0.7);
    border-bottom: 1px solid rgba(100, 255, 218, 0.1);
    transition: var(--transition);
}

.nav-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-family: var(--font-heading);
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--accent);
    transition: var(--transition);
}

.logo:hover {
    text-shadow: 0 0 20px var(--accent-glow);
}

.desktop-menu {
    display: flex;
    gap: 2rem;
}

.nav-link {
    font-size: 0.9rem;
    color: var(--text-secondary);
    position: relative;
    padding-bottom: 4px;
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--accent);
    transition: width 0.3s ease;
}

.nav-link:hover::after,
.nav-link.active::after {
    width: 100%;
}

.nav-link:hover,
.nav-link.active {
    color: var(--accent);
}

/* Hero Section */
.hero-section {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding-top: var(--nav-height);
    position: relative;
}

.hero-grid {
    display: grid;
    grid-template-columns: 3fr 2fr;
    gap: 2rem;
    align-items: center;
}

.eyebrow {
    color: var(--accent);
    font-family: var(--font-body);
    font-weight: 500;
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
    letter-spacing: 0.05em;
}

.hero-title {
    font-size: clamp(3rem, 5vw, 5rem);
    /* Responsive font size */
    line-height: 1.1;
    margin-bottom: 1.5rem;
}

.hero-subtitle {
    font-size: clamp(1.2rem, 2vw, 2rem);
    color: var(--text-secondary);
    margin-bottom: 2.5rem;
    max-width: 600px;
}

.hero-visual {
    display: flex;
    justify-content: center;
    position: relative;
}

/* Abstract Hero Shape */
.hero-shape {
    width: 300px;
    height: 300px;
    background: linear-gradient(45deg, var(--accent), transparent);
    border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    opacity: 0.2;
    animation: morph 8s ease-in-out infinite;
    filter: blur(40px);
}

@keyframes morph {
    0% {
        border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    }

    50% {
        border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%;
    }

    100% {
        border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    }
}

@media (max-width: 768px) {
    .hero-grid {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .hero-visual {
        display: none;
        /* Hide visual on mobile to save space or adjust */
    }

    .cta-group {
        justify-content: center;
        display: flex;
    }

    .hero-subtitle {
        margin-left: auto;
        margin-right: auto;
    }
}

/* Buttons - Enhanced with glow effects */
.btn {
    display: inline-block;
    padding: 1rem 2rem;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.btn-primary {
    border: 1px solid var(--accent);
    color: var(--accent);
    margin-right: 1rem;
    background: transparent;
}

.btn-primary:hover {
    background: var(--accent-glow);
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

.btn-outline {
    border: 1px solid var(--text-secondary);
    color: var(--text-secondary);
    background: transparent;
}

.btn-outline:hover {
    border-color: var(--accent);
    color: var(--accent);
    transform: translateY(-2px);
}

/* Projects Grid */
.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
}

.project-card {
    background: var(--bg-color-light);
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid transparent;
}

.project-card:hover {
    transform: translateY(-8px);
    border-color: rgba(100, 255, 218, 0.2);
    box-shadow: 0 20px 40px -20px rgba(100, 255, 218, 0.15);
}

.card-image-placeholder {
    height: 200px;
    background: #233554;
}

.card-content {
    padding: 1.5rem;
}

.card-content h3 {
    margin-bottom: 0.5rem;
}

.card-content p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 1rem;
}

.card-link {
    color: var(--accent);
    font-size: 0.9rem;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2.5rem;
    }

    .hero-subtitle {
        font-size: 1.5rem;
    }

    .desktop-menu {
        display: none;
    }

    .mobile-toggle {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 30px;
        height: 21px;
        cursor: pointer;
        z-index: 1001;
        /* Above overlay */
    }

    .mobile-toggle span {
        display: block;
        width: 100%;
        height: 3px;
        background: var(--accent);
        border-radius: 2px;
        transition: var(--transition);
    }
}

/* Mobile Menu Overlay */
.mobile-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: var(--bg-color-light);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition);
    z-index: 1000;
}

.mobile-menu.active {
    opacity: 1;
    visibility: visible;
}

.mobile-link {
    font-family: var(--font-heading);
    font-size: 2rem;
    color: var(--text-primary);
    margin: 1.5rem 0;
    transition: var(--transition);
}

.mobile-link:hover {
    color: var(--accent);
    transform: translateX(10px);
}

/* Hamburger Animation */
.mobile-toggle.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 8px);
}

.mobile-toggle.active span:nth-child(2) {
    opacity: 0;
}

.mobile-toggle.active span:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -8px);
}

/* Articles List */
.articles-list {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    max-width: 800px;
}

.article-item {
    display: flex;
    align-items: baseline;
    gap: 2rem;
    padding: 1.5rem;
    border-radius: 8px;
    background: transparent;
    transition: var(--transition);
    border: 1px solid transparent;
    position: relative;
    /* For clickable overlay */
    cursor: pointer;
}

.article-item:hover {
    background: var(--bg-color-light);
    border-color: rgba(100, 255, 218, 0.1);
    transform: translateX(10px);
}

/* Clickable Offset for Cards */
.card-link-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
}

.article-item .date {
    color: var(--text-secondary);
    font-family: var(--font-body);
    min-width: 80px;
    font-size: 0.9rem;
}

.article-info h3 {
    margin-bottom: 0.5rem;
    color: var(--text-primary);
}

.article-info p {
    color: var(--text-secondary);
    font-size: 0.95rem;
}

.read-more {
    margin-left: auto;
    color: var(--accent);
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    border: 1px solid var(--accent);
    border-radius: 4px;
    opacity: 1;
    /* Always visible now */
    transform: none;
    transition: var(--transition);
    text-decoration: none;
    z-index: 11;
    /* Above overlay if clicked directly */
}

.read-more:hover,
.article-item:hover .read-more {
    background: var(--accent-glow);
    transform: translateY(-2px);
}

/* About Section */
.two-col {
    display: grid;
    grid-template-columns: 3fr 2fr;
    gap: 4rem;
    align-items: center;
}

.about-image {
    position: relative;
}

.profile-img {
    max-width: 100%;
    /* Changed from width: 100% to max-width */
    width: auto;
    /* Allow it to be smaller */
    border-radius: 4px;
    transition: var(--transition);
    display: block;
    margin: 0 auto;
    box-shadow: 20px 20px 0px 0px var(--bg-color-light);
}

.profile-img:hover {
    transform: translate(-5px, -5px);
    box-shadow: 25px 25px 0px 0px var(--accent-glow);
}

/* Hero Image Specifics */
.hero-visual .profile-img {
    max-width: 250px;
    border-radius: 50%;
    /* Circle shape for hero */
    box-shadow: 0 0 30px rgba(100, 255, 218, 0.2);
    border: 2px solid var(--accent);
}

.hero-visual .profile-img:hover {
    box-shadow: 0 0 50px rgba(100, 255, 218, 0.4);
    transform: scale(1.05);
}

/* Contact Section */
.centered {
    text-align: center;
    flex-direction: column;
    justify-content: center;
}

.contact-text {
    max-width: 600px;
    margin: 0 auto 2rem;
    font-size: 1.2rem;
    color: var(--text-secondary);
}

.contact-cards {
    margin-bottom: 2rem;
    color: var(--text-primary);
}

.highlight-link {
    color: var(--accent);
}

.social-links {
    margin-top: 4rem;
    display: flex;
    gap: 2rem;
    justify-content: center;
}

.social-icon {
    color: var(--text-secondary);
    font-size: 1.1rem;
    position: relative;
    padding-bottom: 5px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 500;
}

.social-icon:hover {
    color: var(--accent);
}

.social-icon::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: var(--accent);
    transition: var(--transition);
}

.social-icon:hover::after {
    width: 100%;
}

@media (max-width: 768px) {
    .two-col {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .profile-img {
        margin-top: 2rem;
        box-shadow: 15px 15px 0px 0px var(--bg-color-light);
    }

    .article-item {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }

    .read-more {
        opacity: 1;
        transform: translateX(0);
        margin-left: 0;
    }
}

/* Detail Page Content */
.article-content {
    padding-top: 120px;
    /* Space for fixed nav */
    padding-bottom: 80px;
    max-width: 800px;
    margin: 0 auto;
    color: var(--text-secondary);
}

.article-content h1 {
    color: var(--text-primary);
    font-size: 3rem;
    margin-bottom: 1rem;
    line-height: 1.1;
}

.article-content h2 {
    color: var(--text-primary);
    font-size: 2rem;
    margin-top: 3rem;
    margin-bottom: 1.5rem;
}

.article-content h3,
.article-content h4,
.article-content h5 {
    color: var(--text-primary);
    margin-top: 2rem;
    margin-bottom: 1rem;
}

.article-content p {
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
    line-height: 1.8;
}

.article-content ul,
.article-content ol {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
}

.article-content li {
    margin-bottom: 0.5rem;
}

.article-content a {
    color: var(--accent);
    text-decoration: underline;
    text-underline-offset: 4px;
}

.article-content hr {
    border: 0;
    height: 1px;
    background: rgba(136, 146, 176, 0.2);
    margin: 4rem 0;
}

/* Enhanced Contact Cards */
.contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
    width: 100%;
}

.contact-card {
    background: var(--bg-color-light);
    padding: 2.5rem;
    border-radius: 8px;
    text-align: center;
    border: 1px solid transparent;
    transition: var(--transition);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    position: relative;
    overflow: hidden;
}

.contact-card:hover {
    border-color: var(--accent);
    transform: translateY(-5px);
    box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7);
}

.contact-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: var(--accent);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
}

.contact-card:hover::before {
    transform: scaleX(1);
}

.contact-card-icon {
    font-size: 2.5rem;
    color: var(--accent);
    margin-bottom: 0.5rem;
}

.contact-card h3 {
    font-size: 1.3rem;
    margin: 0;
    color: var(--text-primary);
}

.contact-card a {
    color: var(--text-secondary);
    font-size: 1.1rem;
    transition: var(--transition);
    text-decoration: none;
}

.contact-card a:hover {
    color: var(--accent);
}

.github-btn-styled {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 24px;
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--accent);
    border-radius: 4px;
    font-family: var(--font-body);
    /* Changed from mono */
    font-weight: 500;
    transition: var(--transition);
    margin-right: 1rem;
    text-decoration: none;
    font-size: 1rem;
}

.github-btn-styled:hover {
    transform: translateY(-2px);
}

/* --- Resume / Experience Section --- */
.resume-section {
    max-width: 900px;
    margin: 0 auto;
}

/* Tabs */
.resume-tabs {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 3rem;
    flex-wrap: wrap;
}

.tab-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-family: var(--font-heading);
    /* Or body, depending on preference */
    font-size: 1.2rem;
    cursor: pointer;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid transparent;
    transition: var(--transition);
}

.tab-btn:hover,
.tab-btn.active {
    color: var(--accent);
}

.tab-btn.active {
    border-bottom-color: var(--accent);
}

/* Tab Content */
.tab-content {
    display: none;
    animation: fadeIn 0.5s ease-in-out;
}

.tab-content.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Timeline / Card Styles (Reused & Enhanced) */
.timeline {
    position: relative;
    padding-left: 2rem;
    border-left: 2px solid var(--bg-color-light);
}

.timeline-item {
    position: relative;
    margin-bottom: 3rem;
}

.timeline-item:last-child {
    margin-bottom: 0;
}

.timeline-dot {
    position: absolute;
    left: -2.6rem;
    top: 5px;
    width: 1.2rem;
    height: 1.2rem;
    background: var(--bg-color);
    border: 2px solid var(--accent);
    border-radius: 50%;
    transition: var(--transition);
}

.timeline-item:hover .timeline-dot {
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
}

.timeline-card {
    background: var(--bg-color-light);
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid transparent;
    transition: var(--transition);
}

.timeline-card:hover {
    transform: translateY(-5px);
    border-color: rgba(100, 255, 218, 0.1);
    box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7);
}

.timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.timeline-header h3 {
    font-size: 1.3rem;
    color: var(--text-primary);
}

.timeline-date {
    color: var(--accent);
    font-family: var(--font-body);
    font-size: 0.9rem;
    font-weight: 500;
}

.timeline-org {
    color: var(--text-secondary);
    font-size: 1rem;
    margin-bottom: 1rem;
    font-weight: 500;
}

.timeline-content ul {
    list-style: none;
    padding: 0;
}

.timeline-content li {
    position: relative;
    padding-left: 1.5rem;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
    font-size: 0.95rem;
}

.timeline-content li::before {
    content: '▹';
    position: absolute;
    left: 0;
    color: var(--accent);
}

/* Certifications Specifics */
.cert-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
}

.cert-card {
    background: var(--bg-color-light);
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    border: 1px solid transparent;
    transition: var(--transition);
}

.cert-card:hover {
    border-color: var(--accent);
    transform: translateY(-5px);
}

.cert-icon {
    font-size: 2.5rem;
    color: var(--accent);
    margin-bottom: 1rem;
    display: block;
}

.cert-logo {
    width: 120px;
    height: 120px;
    object-fit: contain;
    margin-bottom: 1rem;
    border-radius: 8px;
    transition: var(--transition);
}

.cert-card:hover .cert-logo {
    transform: scale(1.1);
}

/* Footer Clean */
footer {
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: auto;
}
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="https://connorhorning.com/index.html#home" class="logo">CH.</a>

            <div class="desktop-menu">
                <a href="https://connorhorning.com/index.html#home" class="nav-link">Home</a>
                <a href="https://connorhorning.com/index.html#projects" class="nav-link">Projects</a>
                <a href="https://connorhorning.com/index.html#articles" class="nav-link">Articles</a>
                <a href="https://connorhorning.com/index.html#experience" class="nav-link">Resume</a>
                <a href="https://connorhorning.com/index.html#about" class="nav-link">About</a>
                <a href="https://connorhorning.com/index.html#contact" class="nav-link">Contact</a>
            </div>

            <div class="mobile-toggle" id="mobile-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="content-wrapper article-content">
  
<h1>FreePBX Multi-Site Homelab: SIP Trunks, Extensions, and Advanced Setup</h1>
<h2>Introduction</h2>
<p>We wanted to build a phone system in our homelabs. Each of us set up a FreePBX server, purchased a VoIP phone, and configured trunks between our servers to make it work. This setup simulates internal phone calling, with plans to add external calling in the future.</p>
<h2>FreePBX Installation</h2>
<p>There are two ways you can install FreePBX. One with using their ISO file found here: <a href="https://"></a><a href="https://www.freepbx.org/downloads/">https://www.freepbx.org/downloads/</a></p>
<p>The other way is to install it on top of Debian 12. We will go over how to do it both ways.</p>
<h3>ISO Install</h3>
<p>The easiest and most “plug-and-play” way to get FreePBX running is by using the official FreePBX ISO. This method installs a minimal, hardened Linux OS with Asterisk and FreePBX preconfigured, making it ideal for dedicated hardware or a VM.</p>
<p>Start by downloading the latest FreePBX ISO from the official site and attach it to your physical server or virtual machine. Boot from the ISO and follow the on-screen installer. Most environments can safely use the default options.</p>
<p>During installation, you’ll be prompted to:</p>
<ul>
<li>Select your time zone</li>
<li>Configure basic network settings (DHCP or static IP)</li>
<li>Set the root password (Do this before clicking next or you could be locked out of your PBX cmd shell)</li>
</ul>
<p>Once the installer finishes, remove the ISO and reboot the system. After boot, FreePBX will display the management IP address on the console.</p>
<p>From another machine on the network, open a browser and navigate to:</p>
<p><code>http://&lt;FreePBX-IP-address&gt;</code></p>
<p>You’ll then be guided through the initial web-based setup, including:</p>
<ul>
<li>Creating the FreePBX admin account</li>
<li>Setting system credentials</li>
<li>Applying initial module updates</li>
</ul>
<p>This method is best suited for production or lab environments where FreePBX will be the primary role of the system, as it provides a clean, purpose-built PBX with minimal setup effort.</p>
<hr>
<h3>Debian Install</h3>
<blockquote>
<p><strong>Important:</strong> At the time of writing, the official install script does <strong>not</strong> support newer Debian versions.</p>
</blockquote>
<hr>
<h3>Step 1 — Install Debian</h3>
<p>Install <strong>Debian 12 (Bookworm)</strong> with a minimal install.<br>You can do this on:</p>
<ul>
<li>Proxmox VM</li>
<li>Other hypervisor</li>
<li>Physical hardware</li>
</ul>
<h3>Step 2 — Switch to Root</h3>
<p>The installer must be run as the root user:</p>
<pre><code class="language-bash">sudo su
</code></pre>
<h3>Step 3 — Download and Run the FreePBX Installer</h3>
<p>FreePBX provides an automated install script.</p>
<p>Run the following commands:</p>
<pre><code class="language-bash">cd /tmp
wget https://github.com/FreePBX/sng_freepbx_debian_install/raw/master/sng_freepbx_debian_install.sh -O sng_freepbx_debian_install.sh
bash sng_freepbx_debian_install.sh
</code></pre>
<blockquote>
<p><strong>Tip:</strong> This process can take quite a while depending on your system resources.</p>
</blockquote>
<h3>Step 4 — Complete Initial Setup</h3>
<p>Once the script finishes, open your browser and navigate to:</p>
<pre><code>http://&lt;FreePBX-IP-address&gt;
</code></pre>
<p>Follow the on-screen prompts to complete the initial configuration.</p>
<p>At this point, your FreePBX instance should be fully installed and ready for configuration.</p>
<h2>Creating an Extension</h2>
<p>Extensions are what allow phones, softphones, or SIP devices to register to FreePBX and make or receive calls. Each user or device typically gets its own extension.</p>
<p>To create an extension, log into the FreePBX web interface and navigate to:</p>
<p><strong>Connectivity → Extensions</strong></p>
<p>Click <strong>Add Extension</strong> and select <strong>Add New SIP [chan_pjsip] Extension</strong> (recommended for most setups).</p>
<p>At a minimum, you’ll need to configure the following:</p>
<ul>
<li><strong>User Extension</strong> – The extension number (e.g., <code>1001</code>)</li>
<li><strong>Display Name</strong> – A friendly name for the user or device</li>
<li><strong>Secret</strong> – The SIP password used by the phone or softphone</li>
</ul>
<p>Scroll down and review the remaining options. In most cases, the defaults are fine for a basic setup.</p>
<p>Once finished, click <strong>Submit</strong>, then <strong>Apply Config</strong> at the top of the page.</p>
<p>After the extension is created, use the extension number, SIP server IP, and secret to register a physical phone or softphone (such as Zoiper, Linphone, or a desk phone). If registration is successful, the extension should show as <strong>Available</strong> in the FreePBX dashboard.</p>
<p>This process can be repeated for each user or device that needs access to the PBX.</p>
<h2>Voicemail Setup</h2>
<p>Voicemail allows users to receive messages when they are unavailable. Setting it up in FreePBX is straightforward, but it’s important to make sure the PIN matches between the extension and the phone if you plan to access voicemail directly from the handset.</p>
<h3>Enabling Voicemail for an Extension (Optional)</h3>
<ol>
<li><p>Log into the FreePBX web interface.</p>
</li>
<li><p>Navigate to: <code>Connectivity → Extensions</code></p>
</li>
<li><p>Select the extension you want to enable voicemail for.</p>
</li>
<li><p>Scroll down to the <strong>Voicemail</strong> section.</p>
</li>
<li><p>Check <strong>Enable Voicemail</strong>.</p>
</li>
<li><p>Set a <strong>Voicemail Password / PIN</strong> (4–10 digits). This is what users will enter when checking messages from their phone.</p>
</li>
<li><p>Optionally, configure <strong>Email Notification</strong>:</p>
<ul>
<li>Enter the user’s email to receive voicemail notifications.</li>
<li>Choose whether to attach the message as a <code>.wav</code> file.</li>
</ul>
</li>
<li><p>Click <strong>Submit</strong> and then <strong>Apply Config</strong> at the top.</p>
</li>
</ol>
<h3>Accessing Voicemail from the Phone</h3>
<ul>
<li>Dial the <strong>voicemail access code</strong> (usually <code>*97</code> by default).</li>
<li>Enter the voicemail PIN.</li>
<li>Follow the prompts to listen to, save, or delete messages.</li>
</ul>
<p><strong>Tips:</strong></p>
<ul>
<li>Make sure the voicemail PIN on the phone matches the PIN set in FreePBX; otherwise, access will fail.</li>
<li>You can change the voicemail greeting from the phone or the FreePBX web interface.</li>
<li>If using email notifications, confirm your FreePBX server can send emails (SMTP configured correctly).</li>
</ul>
<p>Voicemail adds a simple but powerful layer of functionality, ensuring that no call goes unanswered even when extensions are unavailable.</p>
<h2>Mapping Extension to Sangoma S505</h2>
<p>After creating the extension in FreePBX, you need to configure the Sangoma S505 so it can register with the PBX and make/receive calls.</p>
<h3>Manual Configuration</h3>
<ol>
<li>Find the phone’s IP address on your network (check the screen or use your router’s DHCP table).</li>
<li>Open a web browser and navigate to the phone’s IP address.</li>
<li>Log in as the administrator.</li>
<li>Enter the SIP account details from the extension you created:<ul>
<li><strong>Username / Extension</strong> – Your extension number (e.g., <code>1001</code>)</li>
<li><strong>Authentication ID</strong> – Your extension number</li>
<li><strong>Password / Secret</strong> – The extension secret</li>
<li><strong>SIP Server / Proxy</strong> – The FreePBX server IP address</li>
</ul>
</li>
<li>Save the configuration and reboot the phone.</li>
</ol>
<p>Once the phone restarts, it should register to FreePBX and appear as <strong>Available</strong> in the dashboard. The extension is now ready to make and receive calls.</p>
<p><strong>Tips:</strong></p>
<ul>
<li>Ensure the phone and FreePBX are on the same LAN, or configure proper NAT/firewall rules if remote.</li>
<li>Double-check the extension secret if registration fails.</li>
<li>If enabling voicemail, make sure the PIN on the phone matches the PIN configured for the extension in FreePBX.</li>
<li>Verify the SIP port (usually <code>5060</code>) is not blocked by the network.</li>
</ul>
<h2>Creating Trunk Connections Between PBX Servers</h2>
<p>This assumes:</p>
<ul>
<li>Both FreePBX servers are already installed and reachable over the network (VPN, site-to-site tunnel, or public IP).</li>
<li>You know the IP address of the remote PBX.</li>
</ul>
<hr>
<h3>Step 1 — Create the Trunk on PBX #1</h3>
<ol>
<li>Log into the FreePBX Web UI.</li>
<li>Navigate to:</li>
</ol>
<pre><code>Connectivity → Trunks
</code></pre>
<ol start="3">
<li>Click <strong>Add Trunk</strong> → <strong>Add SIP (chan_pjsip) Trunk</strong></li>
</ol>
<h3>Step 2 — Configure the General Settings</h3>
<p>Give the trunk a recognizable name:</p>
<pre><code>Trunk Name: PBX2
</code></pre>
<h3>Step 3 — Configure the PJSIP Settings</h3>
<p>Under the <strong>pjsip Settings</strong> tab:</p>
<p><strong>General</strong></p>
<pre><code>Authentication: None (or Outbound if using credentials)
Registration: None
SIP Server: &lt;PBX2-IP-Address&gt;
SIP Server Port: 5060
</code></pre>
<p><strong>Advanced</strong></p>
<pre><code>Match (Permit): &lt;PBX2-IP-Address&gt;
</code></pre>
<p>This allows calls from the remote PBX.</p>
<h3>Step 4 — Repeat on PBX #2</h3>
<p>Repeat the same process on the second FreePBX server:</p>
<pre><code>Connectivity → Trunks → Add SIP (chan_pjsip)
</code></pre>
<p>Set:</p>
<pre><code>Trunk Name: PBX1
SIP Server: &lt;PBX1-IP-Address&gt;
Match (Permit): &lt;PBX1-IP-Address&gt;
Authentication: None
Registration: None
</code></pre>
<p>Apply Config after saving.</p>
<h3>Step 5 — Create Outbound Routes</h3>
<p>To allow extensions to dial the other PBX:</p>
<ol>
<li>Navigate to:</li>
</ol>
<pre><code>Connectivity → Outbound Routes
</code></pre>
<ol start="2">
<li>Create a new route.</li>
</ol>
<p>Example:</p>
<pre><code>Route Name: To-PBX2
Dial Patterns: 3XXX
Trunk Sequence: PBX2
</code></pre>
<p>This means any extension dialing 3XXX will route across the trunk.</p>
<p>Repeat on PBX #2 if needed.</p>
<h3>Step 6 — Test the Connection</h3>
<p>From an extension on PBX #1:</p>
<ul>
<li>Dial an extension on PBX #2 that matches the route pattern.</li>
</ul>
<p>If configured correctly:</p>
<ul>
<li>The call should complete immediately.</li>
<li>Audio should flow both directions.</li>
</ul>
<hr>
<h2>Debugging SIP Trunks</h2>
<p>Once your SIP trunks are set up between multiple FreePBX servers, it’s common to run into issues like calls not connecting, audio problems, or registration failures. FreePBX and Asterisk provide several commands and logs that make troubleshooting much easier.</p>
<h3>Useful Commands</h3>
<pre><code>tcpdump -i eth0 -n -s 0 -w sip-trunk.pcap port 5060 or portrange 10000-20000
pjsip show registrations
pjsip show endpoints
core show channels
</code></pre>
<h3>Fixing 30-Second Timeout Issue</h3>
<p>A common issue with SIP phones like the Sangoma S505 is calls dropping or failing after about 30 seconds. This usually happens when <strong>NAT settings</strong> or <strong>SIP session timers</strong> are misconfigured.</p>
<p><strong>Steps to fix:</strong></p>
<ol>
<li><p><strong>Check NAT Settings in FreePBX</strong></p>
<ul>
<li>Navigate to <strong>Settings → Asterisk SIP Settings</strong>.</li>
<li>Under the <strong>General SIP Settings</strong>, make sure:<ul>
<li><strong>External Address</strong> is set to your public IP (if behind NAT).</li>
<li><strong>Local Networks</strong> includes your LAN subnet (e.g., <code>192.168.1.0/24</code>).</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Adjust SIP Timers</strong></p>
<ul>
<li>In <strong>Asterisk SIP Settings</strong>, look for <strong>SIP Timers / Session Timers</strong>:<ul>
<li>Enable <strong>Session Timers</strong>.</li>
<li>Set the session expiration to around <code>180</code> seconds (default is usually fine, but sometimes devices need longer).</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Configure Phone Keep-Alives</strong></p>
<ul>
<li>On the Sangoma S505, enable <strong>SIP OPTIONS Ping</strong> or <strong>Keep Alive</strong>.</li>
<li>This ensures the phone sends regular signals to FreePBX to keep the session active.</li>
</ul>
</li>
<li><p><strong>Firewall / NAT Considerations</strong></p>
<ul>
<li>Make sure UDP port <code>5060</code> (or the port you use for SIP) is open and forwarded correctly if remote.</li>
<li>Avoid double NAT if possible, as it can interfere with SIP signaling.</li>
</ul>
</li>
</ol>
<p>After making these changes, reboot the phone and test a call. Calls should no longer drop at the 30-second mark.</p>
<p><strong>Tip:</strong> This issue almost always comes down to the phone not maintaining a proper NAT mapping with the PBX, so SIP keep-alives and proper external/local network configuration are key.</p>

    </main>

    <!-- Footer -->
    <footer>
        <div class="content-wrapper">
            <p style="text-align:center; padding: 2rem; color: var(--text-secondary);">© 2026 Connor Horning.</p>
        </div>
    </footer>

    <!-- Mobile Navigation Script -->
    <script>
        document.querySelector('.mobile-toggle')?.addEventListener('click', function() {
            document.querySelector('.desktop-menu').classList.toggle('active');
            this.classList.toggle('active');
        });
    </script>

</body>
</html>